  name: Claude Issue Analyzer
  on:
    issues:
      types: [opened]

  jobs:
    analyze-issue:
      runs-on: ubuntu-latest
      timeout-minutes: 10
      permissions:
        contents: read
        issues: write
        id-token: write

      steps:
        - name: Checkout repository
          uses: actions/checkout@v4

        - name: Analyze issue with Claude
          uses: anthropics/claude-code-action@v1
          env:
            GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          with:
            github_token: ${{ secrets.GITHUB_TOKEN }}
            allowed_non_write_users: "*"
            anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
            prompt: |
              Use gh to view issue ${{ github.event.issue.number }} in this repo, then post a short comment summarizing it.
